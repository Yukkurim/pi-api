<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>π API Response</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: #000;
      color: #0f0;
      font-family: monospace;
      padding: 2rem;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
<script>
  // πの小数点以下3000桁（3.1415...）
  const PI_DECIMALS = 
"1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679" +
"8214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196" +
"4428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273" +
"7245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094" +
"3305727036575959195309218611738193261179310511854807446237996274956735188575272489122793818301194912" +
"9833673362440656643086021394946395224737190702179860943702770539217176293176752384674818467669405132" +
"0005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235" +
"4201995611212902196086403441815981362977477130996051870721134999999837297804995105973173281609631859" +
"5024459455346908302642522308253344685035261931188171010003137838752886587533208381420617177669147303" +
"5982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989" +
"3809525720106548586327886593615338182796823030195203530185296899577362259941389124972177528347913151" +
"5574857242454150695950829533116861727855889075098381754637464939319255060400927701671139009848824012" +
"8583616035637076601047101819429555961989467678374494482553797747268471040475346208046684259069491293" +
"3136770289891521047521620569660240580381501935112533824300355876402474964732639141992726042699227967" +
"8235478163600934172164121992458631503028618297455570674983850549458858692699569092721079750930295532" +
"1165344987202755960236480665499119881834797753566369807426542527862551818417574672890977772793800081" +
"6470600161452491921732172147723501414419735685481613611573525521347574184946843852332390739414333454" +
"7762416862518983569485562099219222184272550254256887671790494601653466804988627232791786085784383827" +
"9679766814541009538837863609506800642251252051173929848960841284886269456042419652850222106611863067" +
"4427862203919494504712371378696095636437191728746776465757396241389086583264599581339047802759009946" +
"5764078951269468398352595709825822620134757671887311595628638823537875937519577818577805321712268066" +
"1300192787661119590921642019893809525720106548586327886593615338182796823030195203530185296899577362" +
"2599413891249721775283479131515574857242454150695950829533116861727855889075098381754637464939319255" +
"0604009277016711390098488240128583616035637076601047101819429555961989467678374494482553797747268471" +
"0404753464620804668425906949129331367702898915210475216205696602405803815019351125338243003558764024" +
"7496473263914199272604269922796782354781636009341721641219924586315030286182974555706749838505494588" +
"5869269956909227210797509302955321165344987202755960236480665499119881834797753566369807426542527862" +
"5518184175746728909777727938000816470600161452491921732172147723501414419735685481613611573525521347" +
"5741849468438523323907394143334547762416862518983569485562099219222184272550254256887671790494601653" +
"4668049886272327917860857843838279679766814541009538837863609506800642251252051173929848960841284886" +
"2694560424196528502221066118630674427862203919494504712371378696095636437191728746776465757396241389" +
"0865832645995813390478027590099465764078951269468398352595709825822620134757671887311595628638823537" +
"8759375195778185778053217122680661300192787661119590921642019893809525720106548586327886593615338182" +
"7968230301952035301852968995773622599413891249721775283479131515574857242454150695950829533116861727" +
"8558890750983817546374649393192550604009277016711390098488240128583616035637076601047101819429555961" +
"9894676783744944825537977472684710404753464620804668425906949129331367702898915210475216205696602405" +
"8038150193511253382430035587640247496473263914199272604269922796782354781636009341721641219924586315" +
"0302861829745557067498350549458858692699569092721079750930295532116534498720275596023648066549911988" +
"1834797753566369807426542527862551818417574672890977772793800081647060016145249192173217214772350141";

  const query = location.search; // ?j?数字 例:?j?5
  const match = query.match(/j\?(\d+)/);
  const requestedLength = match ? parseInt(match[1], 10) : NaN;

  if (requestedLength === 0) {
    document.body.innerText = JSON.stringify({ error: "/no" }, null, 2);
  } else if (requestedLength === 1) {
    document.body.innerText = JSON.stringify({ pi: "3" }, null, 2);
  } else if (requestedLength === 2) {
    document.body.innerText = JSON.stringify({ pi: "3.1" }, null, 2);
  } else if (!isNaN(requestedLength) && requestedLength >= 3 && requestedLength <= 3001) {
    const decimalsLength = requestedLength - 1;
    const decimals = PI_DECIMALS.substring(0, decimalsLength);
    document.body.innerText = JSON.stringify({ pi: "3." + decimals }, null, 2);
  } else {
    document.body.innerText = JSON.stringify({
      error: "Invalid request. Use ?j?0 to ?j?3001"
    }, null, 2);
  }
</script>
</body>
</html>

